<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MediZoom - Consultation</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ©º</text></svg>">
</head>
<body data-page="room">
  <div class="app-container meeting-layout">
    <!-- LEFT: Video area -->
    <div class="video-section">
      <!-- Top bar: room info -->
      <div class="top-bar">
        <div>
          <span class="badge">Consultation Room</span>
          <span id="roomLabel" class="room-label"></span>
        </div>
        <div class="top-bar-right">
          <button id="btnParticipants" class="btn participants-btn">
            ğŸ‘¥ Participants
          </button>
          <button id="btnAskAI" class="btn ai-btn">
            ğŸ©º Ask AI
          </button>
          <span id="usernameLabel" class="username-label"></span>
        </div>
      </div>

      <!-- Remote videos grid -->
      <div id="remoteVideos" class="remote-videos-grid">
        <!-- Videos will be added here automatically -->
      </div>

      <!-- Controls -->
      <div class="controls-bar">
        <button id="btnToggleMic" class="btn control-btn">
          ğŸ™ï¸ Mute
        </button>
        <button id="btnLeave" class="btn control-btn">
          ğŸšª Leave
        </button>
        <button id="btnToggleCamera" class="btn control-btn">
          ğŸ“· Camera Off
        </button>
        <button id="btnShareScreen" class="btn control-btn">
          ğŸ–¥ï¸ Share Screen
        </button>
      </div>
    </div>

    <!-- RIGHT: Sidebar (Only Chat) -->
    <div class="sidebar">
      <div class="sidebar-section chat-section">
        <h2 class="sidebar-title">Chat</h2>
        <div id="chatMessages" class="chat-messages">
          <!-- Messages will appear here -->
        </div>
        <form id="chatForm" class="chat-form">
          <input
            id="chatInput"
            type="text"
            class="input chat-input"
            placeholder="Type a message and hit Enter..."
            autocomplete="off"
          />
        </form>
      </div>
    </div>
  </div>

  <!-- AI Analysis Popup -->
    <div id="aiPopup" class="popup-overlay">
      <div class="popup-content">
        <div class="popup-header">
          <h2>ğŸ©º Medical Image Analysis</h2>
          <button id="closeAIPopup" class="btn close-btn">Ã—</button>
        </div>
        
        <div class="popup-body">
          <!-- Upload Form (only visible to initiator) -->
          <form id="aiForm" class="ai-form">
            <label class="label">Upload Medical Image (X-Ray, CT, etc.)</label>
            <input
              id="aiFile"
              type="file"
              name="file"
              accept="image/*"
              class="input"
            />
            <button type="submit" class="btn primary-btn">
              Upload & Analyze
            </button>
          </form>

          <!-- Results Area (visible to everyone) -->
          <div id="aiResult" class="ai-result"></div>
          <img id="aiImagePreview" src="" alt="Medical image preview" class="ai-image-preview" />
        </div>
      </div>
    </div>

  <!-- Participants Popup -->
  <div id="participantsPopup" class="popup-overlay">
    <div class="popup-content">
      <div class="popup-header">
        <h2>ğŸ‘¥ Participants</h2>
        <button id="closeParticipantsPopup" class="btn close-btn">Ã—</button>
      </div>
      
      <div class="popup-body">
        <div id="participantsList" class="participants-list">
          <!-- Participants will be listed here -->
        </div>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>
</html>